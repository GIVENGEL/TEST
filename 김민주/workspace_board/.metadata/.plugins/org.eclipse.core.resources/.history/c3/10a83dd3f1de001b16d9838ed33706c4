package board_ex.service;

import java.util.List;

import board_ex.model.*;

public class ListArticleService {
	
	private int totalRecCount;		// 전체 레코드 수	
	private int pageTotalCount;		// 전체 페이지 수	
	private int countViewPage;	// 한페이지당 레코드 수		5
	private int pageBolck;	// 한 화면에 표시할 페이지 개수  5
	private int startPage;	// 한 화면에 페이지 시작번호	pagenumber+pageBolck
	private int endPage;	// 한 화면에 페이지 끝번호		pagenumber+pageBolck-1
	
	totalRecCount
	
	
	private static ListArticleService instance;
	public static ListArticleService getInstance()  throws BoardException{
		if( instance == null )
		{
			instance = new ListArticleService();
		}
		return instance;
	}
	
	// 전체 페이지 숫자와 한페이지당 몇개의 레코드값이 출력될것인지 구함
	public List <BoardVO> getArticleList(String pNum) throws BoardException
	{	
		int pageNum = 1;
		if(pNum!=null) {
			pageNum = Integer.parseInt(pNum);
		}
		
		countViewPage = 5;
		int startRow = (pageNum*countViewPage)-(countViewPage);
		
		 List <BoardVO> mList = BoardDao.getInstance().selectList(startRow,countViewPage);			
		return mList;
	}
		
	
	public int getTotalCount() throws BoardException{
		// 데이터베이스에서 실제 레코드 수 받아오기
		totalRecCount = BoardDao.getInstance().getTotalCount();
		// 전체 페이지 수(pageTotalCount)		
  		if(totalRecCount/countViewPage == 0){
			pageTotalCount = (totalRecCount/countViewPage);
		}else{
			pageTotalCount = (totalRecCount/countViewPage)+1;
		}
		return pageTotalCount;
		
	}
}
